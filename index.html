<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BongShaj - বঙ্গশাজ | অনলাইন কেনাকাটা</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <style>
        :root {
            --primary-color: #d63384;
            --secondary-color: #fd7e14;
            --accent-color: #ffc107;
            --success-color: #198754;
            --danger-color: #dc3545;
            --dark-color: #212529;
            --light-color: #f8f9fa;
            --border-color: #dee2e6;
            --text-color: #495057;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --gradient: linear-gradient(135deg, #d63384, #fd7e14);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans Bengali', 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: var(--light-color);
        }

        .hidden {
            display: none !important;
        }

        /* Auth Screen */
        .auth-container {
            min-height: 100vh;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .auth-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--text-color);
            margin-bottom: 30px;
            font-size: 0.9rem;
        }

        .social-login {
            margin-bottom: 20px;
        }

        .social-btn {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            background: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .social-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .google-btn {
            color: #db4437;
            border-color: #db4437;
            background: #db4437;
            color: white;
        }

        .facebook-btn {
            color: white;
            border-color: #4267b2;
            background: #4267b2;
        }

        .divider {
            margin: 20px 0;
            position: relative;
            text-align: center;
            color: var(--text-color);
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--border-color);
        }

        .divider span {
            background: white;
            padding: 0 15px;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid var(--border-color);
        }

        .auth-tab {
            flex: 1;
            padding: 10px;
            background: var(--light-color);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auth-tab.active {
            background: var(--primary-color);
            color: white;
        }

        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--dark-color);
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(214, 51, 132, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .error-message {
            color: var(--danger-color);
            font-size: 0.9rem;
            margin-top: 10px;
            text-align: center;
        }

        /* Main App Styles */
        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: white;
            box-shadow: var(--shadow);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .search-container {
            flex: 1;
            max-width: 600px;
            margin: 0 20px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 15px 60px 15px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            background: linear-gradient(135deg, #e91e63, #9c27b0);
            color: white;
            placeholder-color: rgba(255,255,255,0.7);
        }

        .search-input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 0 0 15px 15px;
            box-shadow: var(--shadow);
            max-height: 200px;
            overflow-y: auto;
            z-index: 50;
            display: none;
        }

        .search-suggestion {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background 0.3s ease;
        }

        .search-suggestion:hover {
            background: var(--light-color);
        }

        .search-suggestion:last-child {
            border-bottom: none;
        }

        .search-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            color: var(--primary-color);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-color);
        }

        .banner {
            background: var(--gradient);
            color: white;
            padding: 15px 20px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 15px;
            margin: 20px;
            position: relative;
            overflow: hidden;
        }

        .banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, #ff6b9d, #c44569);
            z-index: -1;
        }

        .banner-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .flash-sale {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .live-indicator {
            width: 8px;
            height: 8px;
            background: #4CAF50;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .categories {
            padding: 20px;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark-color);
            text-align: center;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .category-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 10px;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .category-name {
            font-weight: 600;
            color: var(--dark-color);
        }

        .products {
            padding: 0 20px 20px;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 140px;
            object-fit: cover;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 0.8rem;
        }

        .product-info {
            padding: 12px;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark-color);
            font-size: 0.9rem;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .current-price {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .original-price {
            font-size: 0.9rem;
            color: #999;
            text-decoration: line-through;
        }

        .discount {
            font-size: 0.8rem;
            color: #4CAF50;
            font-weight: 600;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-color);
            padding: 5px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .nav-item.active, .nav-item:hover {
            color: var(--primary-color);
            background: rgba(214, 51, 132, 0.1);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 2px;
        }

        .nav-text {
            font-size: 0.8rem;
        }

        .main-content {
            flex: 1;
            padding-bottom: 80px;
        }

        /* Product Details Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 20px;
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .product-details-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 15px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
        }

        .size-selector, .color-selector {
            margin-bottom: 15px;
        }

        .selector-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .option {
            padding: 8px 16px;
            border: 2px solid var(--border-color);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .option.selected {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-cart {
            flex: 1;
            background: #ff9800;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-buy {
            flex: 1;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Cart Styles */
        .cart-item {
            display: flex;
            align-items: center;
            gap: 15px;
            background: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--primary-color);
            font-weight: 600;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .qty-btn {
            width: 30px;
            height: 30px;
            border: 1px solid var(--border-color);
            background: white;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qty-display {
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }

        .remove-btn {
            color: var(--danger-color);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .cart-total {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px;
            box-shadow: var(--shadow);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .total-amount {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
            border-top: 1px solid var(--border-color);
            padding-top: 10px;
        }

        /* Checkout Styles */
        .checkout-section {
            background: white;
            margin: 20px;
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 15px;
        }

        .checkout-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark-color);
        }

        .order-summary {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
            margin-bottom: 15px;
        }

        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .payment-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover {
            border-color: var(--primary-color);
        }

        .payment-option.selected {
            border-color: var(--primary-color);
            background: rgba(214, 51, 132, 0.05);
        }

        .payment-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .payment-details {
            flex: 1;
        }

        .payment-name {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .payment-desc {
            font-size: 0.9rem;
            color: #666;
        }

        .upi-details {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .qr-code {
            text-align: center;
            margin-bottom: 15px;
        }

        .qr-placeholder {
            width: 150px;
            height: 150px;
            background: white;
            border: 2px dashed #ddd;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            color: #999;
        }

        .upi-id {
            text-align: center;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .place-order-btn {
            width: 100%;
            background: var(--gradient);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
        }

        .order-success {
            text-align: center;
            padding: 40px 20px;
        }

        .success-icon {
            font-size: 4rem;
            color: var(--success-color);
            margin-bottom: 20px;
        }

        .success-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .success-message {
            color: var(--text-color);
            margin-bottom: 20px;
        }

        .order-id {
            background: var(--light-color);
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        /* Account Pages */
        .account-header {
            background: var(--gradient);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        .account-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .account-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .account-email {
            opacity: 0.9;
        }

        .account-menu {
            padding: 20px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: var(--shadow);
            text-decoration: none;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .menu-item:hover {
            transform: translateX(5px);
        }

        .menu-icon {
            width: 20px;
            text-align: center;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-color);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .empty-message {
            opacity: 0.7;
            margin-bottom: 20px;
        }

        .address-form {
            padding: 20px;
        }

        .address-display {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px;
            box-shadow: var(--shadow);
        }

        .address-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .edit-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            min-height: 80px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-container {
                max-width: 100%;
                margin: 0;
            }
            
            .banner-content {
                font-size: 1rem;
            }
            
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 12px;
            }

            .modal-content {
                margin: 10px;
                max-width: calc(100% - 20px);
            }

            .payment-methods {
                gap: 8px;
            }

            .payment-option {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Screen -->
    <div id="authScreen" class="auth-container">
        <div class="auth-card">
            <div class="logo">BongShaj</div>
            <p class="subtitle">আপনার পছন্দের কেনাকাটার গন্তব্য</p>
            
            <!-- Social Login -->
            <div class="social-login">
                <button class="social-btn google-btn" onclick="signInWithGoogle()">
                    <i class="fab fa-google"></i>
                    Google দিয়ে লগইন
                </button>
                <button class="social-btn facebook-btn" onclick="signInWithFacebook()">
                    <i class="fab fa-facebook-f"></i>
                    Facebook দিয়ে লগইন
                </button>
            </div>
            
            <div class="divider">
                <span>অথবা</span>
            </div>
            
            <!-- Auth Tabs -->
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="showAuthTab('login')">লগইন করুন</button>
                <button class="auth-tab" onclick="showAuthTab('signup')">সাইন আপ করুন</button>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="auth-form">
                <div class="form-group">
                    <label>ইমেইল আড্রেস</label>
                    <input type="email" id="loginEmail" required placeholder="ইমেইল আড্রেস">
                </div>
                <div class="form-group">
                    <label>পাসওয়ার্ড</label>
                    <input type="password" id="loginPassword" required placeholder="পাসওয়ার্ড">
                </div>
                <button type="submit" class="btn btn-primary">লগইন করুন</button>
            </form>
            
            <!-- Signup Form -->
            <form id="signupForm" class="auth-form hidden">
                <div class="form-group">
                    <label>নামের প্রথম অংশ *</label>
                    <input type="text" id="signupFirstName" required placeholder="নামের প্রথম অংশ">
                </div>
                <div class="form-group">
                    <label>নামের শেষাংশ *</label>
                    <input type="text" id="signupLastName" required placeholder="নামের শেষাংশ">
                </div>
                <div class="form-group">
                    <label>মোবাইল নম্বর *</label>
                    <input type="tel" id="signupMobile" required placeholder="মোবাইল নম্বর">
                </div>
                <div class="form-group">
                    <label>ইমেইল আড্রেস *</label>
                    <input type="email" id="signupEmail" required placeholder="ইমেইল আড্রেস">
                </div>
                <div class="form-group">
                    <label>পাসওয়ার্ড *</label>
                    <input type="password" id="signupPassword" required placeholder="পাসওয়ার্ড">
                </div>
                <div class="form-group">
                    <label>পাসওয়ার্ড নিশ্চিত করুন *</label>
                    <input type="password" id="signupConfirmPassword" required placeholder="পাসওয়ার্ড নিশ্চিত করুন">
                </div>
                <button type="submit" class="btn btn-primary">সাইন আপ</button>
                <p style="margin-top: 15px; font-size: 0.9rem; color: #666;">ইতিমধ্যে আকাউন্ট আছে? <span onclick="showAuthTab('login')" style="color: var(--primary-color); cursor: pointer;">লগইন করুন</span></p>
            </form>
            
            <div id="authError" class="error-message hidden"></div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="app-container hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-top">
                <div class="logo">BongShaj</div>
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="পণ্য খুঁজুন..." id="searchInput" oninput="showSearchSuggestions()" onblur="hideSearchSuggestions()">
                    <button class="search-btn" onclick="searchProducts()">GO</button>
                    <div class="search-suggestions" id="searchSuggestions"></div>
                </div>
                <div class="user-info">
                    <span id="userName">স্বাগতম</span>
                    <button onclick="logout()" style="background: none; border: none; color: var(--danger-color); cursor: pointer;">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Home Page -->
            <div id="homePage">
                <!-- Banner -->
                <section class="banner">
                    <div class="banner-content">
                        <div class="flash-sale">
                            <span>ORDER NOW</span>
                            <div class="live-indicator"></div>
                            <span>LIVE NOW</span>
                            <i class="fas fa-bolt"></i>
                            <span>FLASH SALE!</span>
                        </div>
                    </div>
                </section>

                <!-- Categories -->
                <section class="categories">
                    <h2 class="section-title">জনপ্রিয় ক্যাটেগরি</h2>
                    <div class="category-grid">
                        <div class="category-card" onclick="filterProducts('jewelry')">
                            <div class="category-icon">💍</div>
                            <div class="category-name">গহনা</div>
                        </div>
                        <div class="category-card" onclick="filterProducts('beauty')">
                            <div class="category-icon">💄</div>
                            <div class="category-name">সৌন্দর্য</div>
                        </div>
                    </div>
                </section>

                <!-- Products -->
                <section class="products">
                    <h2 class="section-title">সব পণ্য</h2>
                    <div class="product-grid" id="productGrid">
                        <!-- Products will be loaded here -->
                    </div>
                </section>
            </div>

            <!-- Products Page -->
            <div id="productsPage" class="hidden">
                <section class="products">
                    <h2 class="section-title">সব পণ্য</h2>
                    <div class="product-grid" id="allProductGrid">
                        <!-- All products will be loaded here -->
                    </div>
                </section>
            </div>

            <!-- Cart Page -->
            <div id="cartPage" class="hidden">
                <div class="page-header" style="background: var(--gradient); color: white; padding: 20px; text-align: center;">
                    <h2 style="margin: 0;">আমার কার্ট</h2>
                </div>
                <div id="cartItems">
                    <div class="empty-state">
                        <div class="empty-icon">🛒</div>
                        <div class="empty-title">Your cart is empty.</div>
                        <div class="empty-message">কার্টে কোনো পণ্য নেই।</div>
                    </div>
                </div>
                <div id="cartTotal" class="cart-total hidden">
                    <div class="total-row">
                        <span>মোট পণ্য:</span>
                        <span id="totalItems">0</span>
                    </div>
                    <div class="total-row">
                        <span>সাবটোটাল:</span>
                        <span id="subtotal">৳0</span>
                    </div>
                    <div class="total-row">
                        <span>ডেলিভারি চার্জ:</span>
                        <span>৳50</span>
                    </div>
                    <div class="total-row total-amount">
                        <span>মোট:</span>
                        <span id="totalAmount">৳50</span>
                    </div>
                    <button class="place-order-btn" onclick="proceedToCheckout()">চেকআউট করুন</button>
                </div>
            </div>

            <!-- Checkout Page -->
            <div id="checkoutPage" class="hidden">
                <div class="page-header" style="background: var(--gradient); color: white; padding: 20px; text-align: center;">
                    <h2 style="margin: 0;">অর্ডার সম্পন্ন করুন</h2>
                </div>
                
                <div class="checkout-section">
                    <h3 class="checkout-title">অর্ডার সারসংক্ষেপ</h3>
                    <div id="orderSummary" class="order-summary">
                        <!-- Order items will be displayed here -->
                    </div>
                </div>

                <div class="checkout-section">
                    <h3 class="checkout-title">পেমেন্ট পদ্ধতি</h3>
                    <div class="payment-methods">
                        <div class="payment-option" onclick="selectPayment('upi')">
                            <div class="payment-icon">📱</div>
                            <div class="payment-details">
                                <div class="payment-name">UPI পেমেন্ট</div>
                                <div class="payment-desc">bosak.mr@superyes</div>
                            </div>
                            <input type="radio" name="payment" value="upi">
                        </div>
                        
                        <div class="payment-option" onclick="selectPayment('supermoney')">
                            <div class="payment-icon">💳</div>
                            <div class="payment-details">
                                <div class="payment-name">SuperMoney</div>
                                <div class="payment-desc">QR Code দিয়ে পেমেন্ট করুন</div>
                            </div>
                            <input type="radio" name="payment" value="supermoney">
                        </div>
                        
                        <div class="payment-option" onclick="selectPayment('cod')">
                            <div class="payment-icon">🏠</div>
                            <div class="payment-details">
                                <div class="payment-name">Cash on Delivery</div>
                                <div class="payment-desc">পণ্য পৌঁছানোর সময় পেমেন্ট করুন</div>
                            </div>
                            <input type="radio" name="payment" value="cod">
                        </div>
                    </div>

                    <!-- UPI Details -->
                    <div id="upiDetails" class="upi-details hidden">
                        <div class="qr-code">
                            <img src="/lovable-uploads/a7ecdfe5-d42f-4f65-843f-6d51f8a8f3ef.png" alt="SuperMoney QR Code" style="width: 200px; height: auto; border-radius: 10px;">
                            <div class="upi-id">bosak.mr@superyes</div>
                        </div>
                        <p style="text-align: center; color: #666; font-size: 0.9rem;">
                            উপরের QR কোড স্ক্যান করুন অথবা UPI ID ব্যবহার করে পেমেন্ট করুন
                        </p>
                        
                        <div id="paymentVerification" class="payment-verification hidden">
                            <div id="paymentStatus">পেমেন্ট যাচাই করা হচ্ছে...</div>
                            <button class="verify-payment-btn" onclick="verifyPayment()">পেমেন্ট যাচাই করুন</button>
                        </div>
                    </div>

                    <button class="place-order-btn" onclick="initiatePayment()" id="placeOrderBtn" disabled>
                        পেমেন্ট করুন
                    </button>
                </div>
            </div>

            <!-- Order Success Page -->
            <div id="orderSuccessPage" class="hidden">
                <div class="order-success">
                    <div class="success-icon">✅</div>
                    <div class="success-title">অর্ডার সফল হয়েছে!</div>
                    <div class="success-message">আপনার অর্ডারটি সফলভাবে সম্পন্ন হয়েছে।</div>
                    <div class="order-id">অর্ডার ID: <span id="orderIdDisplay"></span></div>
                    <div style="color: #666; margin-bottom: 20px;">
                        <i class="fas fa-truck"></i> Estimated delivery in 5-7 days
                    </div>
                    <button class="btn btn-primary" onclick="goToOrders()">আমার অর্ডার দেখুন</button>
                </div>
            </div>

            <!-- Orders Page -->
            <div id="ordersPage" class="hidden">
                <div class="page-header" style="background: var(--gradient); color: white; padding: 20px; text-align: center;">
                    <h2 style="margin: 0;">📦 আমার অর্ডার</h2>
                </div>
                <div id="ordersList">
                    <div class="empty-state">
                        <div class="empty-icon">📦</div>
                        <div class="empty-title">কোনো অর্ডার নেই</div>
                        <div class="empty-message">আপনি এখনো কোনো অর্ডার করেননি।</div>
                    </div>
                </div>
            </div>

            <!-- Account Page -->
            <div id="accountPage" class="hidden">
                <div class="account-header">
                    <div class="account-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="account-name" id="accountUserName">BongShaj User</div>
                    <div class="account-email" id="accountUserEmail">user@example.com</div>
                </div>
                
                <div class="account-menu">
                    <div class="menu-item" onclick="showPage('orders')">
                        <div class="menu-icon">📦</div>
                        <div>আমার অর্ডার</div>
                    </div>
                    <div class="menu-item" onclick="showAddressPage()">
                        <div class="menu-icon">🏠</div>
                        <div>সেভ করা ঠিকানা</div>
                    </div>
                    <div class="menu-item" onclick="showWishlist()">
                        <div class="menu-icon">❤️</div>
                        <div>গছন্দের তালিকা</div>
                    </div>
                    <div class="menu-item" onclick="logout()" style="color: var(--danger-color);">
                        <div class="menu-icon">🚪</div>
                        <div>লগআউট</div>
                    </div>
                </div>
            </div>

            <!-- Address Page -->
            <div id="addressPage" class="hidden">
                <div class="page-header" style="background: var(--gradient); color: white; padding: 20px; text-align: center;">
                    <h2 style="margin: 0;">🏠 আমার ঠিকানা</h2>
                </div>
                
                <div id="savedAddress" class="hidden">
                    <div class="address-display">
                        <div class="address-header">
                            <h3>সেভ করা ঠিকানা</h3>
                            <button class="edit-btn" onclick="editAddress()">✏️ Edit</button>
                        </div>
                        <div id="addressDetails">
                            <!-- Address details will be shown here -->
                        </div>
                    </div>
                </div>

                <div id="noAddress">
                    <div class="empty-state">
                        <div class="empty-icon">🏠</div>
                        <div class="empty-title">আপনি এখনো ঠিকানা সেট করেননি</div>
                        <button class="btn btn-primary" onclick="showAddressForm()">➕ ঠিকানা যোগ করুন</button>
                    </div>
                </div>

                <div id="addressForm" class="address-form hidden">
                    <h3>নতুন আকাউন্ট তৈরি করুন</h3>
                    <form onsubmit="saveAddress(event)">
                        <div class="form-group">
                            <label>নাম</label>
                            <input type="text" id="addressName" required placeholder="নাম">
                        </div>
                        <div class="form-group">
                            <label>মোবাইল নম্বর</label>
                            <input type="tel" id="addressMobile" required placeholder="মোবাইল নম্বর">
                        </div>
                        <div class="form-group">
                            <label>ঠিকানা</label>
                            <textarea class="form-textarea" id="addressText" required placeholder="ঠিকানা"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">💾 ঠিকানা সেভ করুন</button>
                    </form>
                </div>
            </div>
        </main>

        <!-- Product Details Modal -->
        <div id="productModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>পণ্যের বিস্তারিত</h3>
                    <button class="close-btn" onclick="closeProductModal()">&times;</button>
                </div>
                <div id="productModalContent">
                    <!-- Product details will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Order Details Modal -->
        <div id="orderDetailsModal" class="order-details-modal hidden">
            <div class="order-details-content">
                <div class="modal-header">
                    <h3>অর্ডার বিস্তারিত</h3>
                    <button class="close-btn" onclick="closeOrderDetails()">&times;</button>
                </div>
                <div id="orderDetailsContent">
                    <!-- Order details will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="#" class="nav-item active" onclick="showPage('home')">
                <div class="nav-icon">🏠</div>
                <div class="nav-text">হোম</div>
            </a>
            <a href="#" class="nav-item" onclick="showPage('products')">
                <div class="nav-icon">🛍️</div>
                <div class="nav-text">পণ্য</div>
            </a>
            <a href="#" class="nav-item" onclick="showPage('cart')">
                <div class="nav-icon">🛒</div>
                <div class="nav-text">কার্ট</div>
            </a>
            <a href="#" class="nav-item" onclick="showPage('orders')">
                <div class="nav-icon">📦</div>
                <div class="nav-text">অর্ডার</div>
            </a>
            <a href="#" class="nav-item" onclick="showPage('account')">
                <div class="nav-icon">👤</div>
                <div class="nav-text">অ্যাকাউন্ট</div>
            </a>
        </nav>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBmRSl_OiC9taoxxDGqph1jb5j0x_vwCSI",
            authDomain: "bongshaj-3e2cc.firebaseapp.com",
            projectId: "bongshaj-3e2cc",
            storageBucket: "bongshaj-3e2cc.firebasestorage.app",
            messagingSenderId: "1066149411378",
            appId: "1:1066149411378:web:dc43e53e1ed5c198285a2b",
            measurementId: "G-7WSWCCFTPC"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Global variables
        let currentUser = null;
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let savedAddress = JSON.parse(localStorage.getItem('savedAddress')) || null;
        let selectedPaymentMethod = null;
        let pendingPaymentOrder = null;

        // Sample products data
        let products = [
            {
                id: 1,
                name: "Sling Bags",
                price: 69,
                originalPrice: 199,
                image: "placeholder",
                category: "bags",
                sizes: ["S", "M", "L"],
                colors: ["Black", "Brown", "Pink"],
                description: "A beautiful Sling Bags from our collection.",
                discount: "65% off"
            },
            {
                id: 2,
                name: "Georgette Sarees",
                price: 189,
                originalPrice: 499,
                image: "placeholder",
                category: "sarees", 
                sizes: ["Free Size"],
                colors: ["Red", "Blue", "Green"],
                description: "Premium Georgette Sarees for special occasions.",
                discount: "62% off"
            },
            {
                id: 3,
                name: "Men's Tees",
                price: 79,
                originalPrice: 299,
                image: "placeholder",
                category: "clothing",
                sizes: ["S", "M", "L", "XL"],
                colors: ["White", "Black", "Navy"],
                description: "Comfortable cotton t-shirts for men.",
                discount: "74% off"
            },
            {
                id: 4,
                name: "Kitchen Bestsellers",
                price: 60,
                originalPrice: 150,
                image: "placeholder",
                category: "kitchen",
                sizes: ["Standard"],
                colors: ["Silver", "Black"],
                description: "Essential kitchen items for every home.",
                discount: "60% off"
            },
            {
                id: 5,
                name: "সোনালী জুমকা",
                price: 850,
                originalPrice: 1200,
                image: "placeholder",
                category: "jewelry",
                sizes: ["S", "M", "L"],
                colors: ["Gold", "Silver"],
                description: "সুন্দর সোনালী জুমকা, বিশেষ উৎসবের জন্য উপযুক্ত।",
                discount: "29% off"
            },
            {
                id: 6,
                name: "রঙিন চুড়ি সেট",
                price: 650,
                originalPrice: 900,
                image: "placeholder",
                category: "jewelry",
                sizes: ["S", "M", "L"],
                colors: ["Red", "Green", "Blue"],
                description: "হাতে পরার জন্য সুন্দর রঙিন চুড়ির সেট।",
                discount: "28% off"
            },
            {
                id: 7,
                name: "ন্যাচারাল লিপস্টিক",
                price: 450,
                originalPrice: 600,
                image: "placeholder",
                category: "beauty",
                colors: ["Pink", "Red", "Coral"],
                description: "প্রাকৃতিক উপাদানে তৈরি লিপস্টিক।",
                discount: "25% off"
            }
        ];

        // Check if user is already logged in
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                showMainApp(user);
            } else {
                showAuthScreen();
            }
        });

        // Auth Functions
        function showAuthTab(tab) {
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            const tabs = document.querySelectorAll('.auth-tab');
            
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tab === 'login') {
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
            } else {
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
            }
        }

        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    console.log('Google sign-in successful:', result.user);
                    showMainApp(result.user);
                })
                .catch((error) => {
                    showError('Google লগইনে সমস্যা হয়েছে: ' + error.message);
                });
        }

        function signInWithFacebook() {
            const provider = new firebase.auth.FacebookAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    console.log('Facebook sign-in successful:', result.user);
                    showMainApp(result.user);
                })
                .catch((error) => {
                    showError('Facebook লগইনে সমস্যা হয়েছে: ' + error.message);
                });
        }

        // Email/Password Login
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            auth.signInWithEmailAndPassword(email, password)
                .then((result) => {
                    console.log('Login successful:', result.user);
                    showMainApp(result.user);
                })
                .catch((error) => {
                    showError('লগইনে সমস্যা হয়েছে: ' + error.message);
                });
        });

        // Email/Password Signup
        document.getElementById('signupForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const firstName = document.getElementById('signupFirstName').value;
            const lastName = document.getElementById('signupLastName').value;
            const mobile = document.getElementById('signupMobile').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            
            if (password !== confirmPassword) {
                showError('পাসওয়ার্ড মিলছে না');
                return;
            }
            
            auth.createUserWithEmailAndPassword(email, password)
                .then((result) => {
                    return result.user.updateProfile({
                        displayName: `${firstName} ${lastName}`
                    }).then(() => {
                        const userData = {
                            firstName,
                            lastName,
                            mobile,
                            email,
                            uid: result.user.uid
                        };
                        localStorage.setItem('userData', JSON.stringify(userData));
                        console.log('Signup successful:', result.user);
                        showMainApp(result.user);
                    });
                })
                .catch((error) => {
                    showError('অ্যাকাউন্ট তৈরি করতে সমস্যা হয়েছে: ' + error.message);
                });
        });

        function logout() {
            if (confirm('আপনি কি লগআউট করতে চান?')) {
                auth.signOut().then(() => {
                    localStorage.removeItem('userData');
                    cart = [];
                    localStorage.removeItem('cart');
                    showAuthScreen();
                });
            }
        }

        function showError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
            setTimeout(() => {
                errorDiv.classList.add('hidden');
            }, 5000);
        }

        function showAuthScreen() {
            document.getElementById('authScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp(user) {
            document.getElementById('authScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            currentUser = user;
            const userName = user.displayName || user.email.split('@')[0];
            document.getElementById('userName').textContent = `স্বাগতম ${userName}`;
            document.getElementById('accountUserName').textContent = userName;
            document.getElementById('accountUserEmail').textContent = user.email;
            
            loadProducts();
            updateCartDisplay();
            loadOrders();
            loadSavedAddress();
        }

        // Product Functions
        function loadProducts(category = null) {
            const productGrid = document.getElementById('productGrid');
            const allProductGrid = document.getElementById('allProductGrid');
            const filteredProducts = category ? products.filter(p => p.category === category) : products;
            
            const productHTML = filteredProducts.map(product => `
                <div class="product-card" onclick="showProductDetails(${product.id})">
                    <div class="product-image">Image placeholder</div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">
                            <span class="current-price">৳${product.price}</span>
                            ${product.originalPrice ? `<span class="original-price">৳${product.originalPrice}</span>` : ''}
                            ${product.discount ? `<span class="discount">${product.discount}</span>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
            
            if (productGrid) productGrid.innerHTML = productHTML;
            if (allProductGrid) allProductGrid.innerHTML = productHTML;
        }

        function filterProducts(category) {
            loadProducts(category);
        }

        function showProductDetails(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const modalContent = document.getElementById('productModalContent');
            modalContent.innerHTML = `
                <div class="product-details-image">Image placeholder</div>
                <h3>${product.name}</h3>
                <div class="product-price">
                    <span class="current-price">৳${product.price}</span>
                    ${product.originalPrice ? `<span class="original-price">৳${product.originalPrice}</span>` : ''}
                    ${product.discount ? `<span class="discount">${product.discount}</span>` : ''}
                </div>
                <p>${product.description}</p>
                
                ${product.sizes ? `
                <div class="size-selector">
                    <div class="selector-title">সাইজ:</div>
                    <div class="options">
                        ${product.sizes.map(size => `<div class="option" onclick="selectOption(this, 'size')">${size}</div>`).join('')}
                    </div>
                </div>` : ''}
                
                ${product.colors ? `
                <div class="color-selector">
                    <div class="selector-title">রঙ:</div>
                    <div class="options">
                        ${product.colors.map(color => `<div class="option" onclick="selectOption(this, 'color')">${color}</div>`).join('')}
                    </div>
                </div>` : ''}
                
                <div style="color: #666; margin: 15px 0;">
                    <i class="fas fa-truck"></i> Estimated delivery in 5-7 days.
                </div>
                
                <div class="action-buttons">
                    <button class="btn-cart" onclick="addToCart(${productId})">ADD TO CART</button>
                    <button class="btn-buy" onclick="buyNow(${productId})">BUY NOW</button>
                </div>
            `;
            
            document.getElementById('productModal').classList.remove('hidden');
        }

        function selectOption(element, type) {
            const siblings = element.parentNode.children;
            for (let sibling of siblings) {
                sibling.classList.remove('selected');
            }
            element.classList.add('selected');
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.add('hidden');
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1,
                    selectedSize: null,
                    selectedColor: null
                });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
            closeProductModal();
            alert('পণ্যটি কার্টে যোগ করা হয়েছে!');
        }

        function buyNow(productId) {
            addToCart(productId);
            showPage('cart');
            closeProductModal();
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">🛒</div>
                        <div class="empty-title">Your cart is empty.</div>
                        <div class="empty-message">কার্টে কোনো পণ্য নেই।</div>
                    </div>
                `;
                cartTotal.classList.add('hidden');
                return;
            }
            
            cartItems.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-image">Image</div>
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">৳${item.price}</div>
                        <div class="quantity-controls">
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                            <span class="qty-display">${item.quantity}</span>
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                        </div>
                    </div>
                    <button class="remove-btn" onclick="removeFromCart(${item.id})">🗑️</button>
                </div>
            `).join('');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal + 50; // 50 delivery charge
            
            document.getElementById('totalItems').textContent = totalItems;
            document.getElementById('subtotal').textContent = `৳${subtotal}`;
            document.getElementById('totalAmount').textContent = `৳${total}`;
            cartTotal.classList.remove('hidden');
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCartDisplay();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                alert('কার্টে কোনো পণ্য নেই।');
                return;
            }
            
            if (!savedAddress) {
                alert('প্রথমে আপনার ঠিকানা সেভ করুন।');
                showPage('account');
                setTimeout(() => showAddressPage(), 500);
                return;
            }
            
            // Display order summary
            const orderSummary = document.getElementById('orderSummary');
            orderSummary.innerHTML = cart.map(item => `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <div>
                        <div style="font-weight: 600;">${item.name}</div>
                        <div style="color: #666; font-size: 0.9rem;">Quantity: ${item.quantity}</div>
                    </div>
                    <div style="font-weight: 600; color: var(--primary-color);">৳${item.price * item.quantity}</div>
                </div>
            `).join('') + `
                <div style="border-top: 1px solid var(--border-color); padding-top: 10px; margin-top: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Subtotal:</span>
                        <span>৳${cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Delivery:</span>
                        <span>৳50</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-weight: 700; font-size: 1.1rem; color: var(--primary-color);">
                        <span>Total:</span>
                        <span>৳${cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) + 50}</span>
                    </div>
                </div>
            `;
            
            showPage('checkout');
        }

        // Search Functions
        function showSearchSuggestions() {
            const input = document.getElementById('searchInput');
            const suggestions = document.getElementById('searchSuggestions');
            const query = input.value.toLowerCase().trim();
            
            if (query.length === 0) {
                suggestions.style.display = 'none';
                return;
            }
            
            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(query)
            ).slice(0, 5);
            
            if (filteredProducts.length > 0) {
                suggestions.innerHTML = filteredProducts.map(product => 
                    `<div class="search-suggestion" onclick="selectSearchSuggestion('${product.name}')">${product.name}</div>`
                ).join('');
                suggestions.style.display = 'block';
            } else {
                suggestions.style.display = 'none';
            }
        }

        function selectSearchSuggestion(productName) {
            document.getElementById('searchInput').value = productName;
            document.getElementById('searchSuggestions').style.display = 'none';
            searchProducts();
        }

        function hideSearchSuggestions() {
            setTimeout(() => {
                document.getElementById('searchSuggestions').style.display = 'none';
            }, 200);
        }

        function searchProducts() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            if (query.length === 0) return;
            
            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(query)
            );
            
            showPage('products');
            loadFilteredProducts(filteredProducts);
        }

        function loadFilteredProducts(filteredProducts) {
            const allProductGrid = document.getElementById('allProductGrid');
            
            const productHTML = filteredProducts.map(product => `
                <div class="product-card" onclick="showProductDetails(${product.id})">
                    <div class="product-image">Image placeholder</div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">
                            <span class="current-price">৳${product.price}</span>
                            ${product.originalPrice ? `<span class="original-price">৳${product.originalPrice}</span>` : ''}
                            ${product.discount ? `<span class="discount">${product.discount}</span>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
            
            if (filteredProducts.length === 0) {
                allProductGrid.innerHTML = '<div style="text-align: center; padding: 40px; color: #666;">কোনো পণ্য পাওয়া যায়নি</div>';
            } else {
                allProductGrid.innerHTML = productHTML;
            }
        }

        // Payment Functions
        function selectPayment(method) {
            selectedPaymentMethod = method;
            
            // Update UI
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // Update radio button
            document.querySelector(`input[value="${method}"]`).checked = true;
            
            // Show/hide UPI details
            const upiDetails = document.getElementById('upiDetails');
            if (method === 'upi' || method === 'supermoney') {
                upiDetails.classList.remove('hidden');
            } else {
                upiDetails.classList.add('hidden');
            }
            
            // Enable place order button
            const btn = document.getElementById('placeOrderBtn');
            btn.disabled = false;
            
            if (method === 'cod') {
                btn.textContent = 'অর্ডার নিশ্চিত করুন';
            } else {
                btn.textContent = 'পেমেন্ট করুন';
            }
        }

        function initiatePayment() {
            if (!selectedPaymentMethod) {
                alert('পেমেন্ট পদ্ধতি নির্বাচন করুন।');
                return;
            }
            
            const orderId = 'BNG' + Date.now();
            const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) + 50;
            
            pendingPaymentOrder = {
                id: orderId,
                items: [...cart],
                totalAmount: totalAmount,
                paymentMethod: selectedPaymentMethod,
                status: 'Pending Payment',
                date: new Date().toLocaleDateString('bn-BD'),
                address: savedAddress
            };
            
            if (selectedPaymentMethod === 'cod') {
                // COD orders are confirmed immediately
                confirmOrder();
            } else {
                // For UPI/SuperMoney, show payment verification
                showPaymentVerification();
            }
        }

        function showPaymentVerification() {
            const verification = document.getElementById('paymentVerification');
            const status = document.getElementById('paymentStatus');
            
            verification.classList.remove('hidden');
            verification.className = 'payment-verification payment-pending';
            status.textContent = `৳${pendingPaymentOrder.totalAmount} পেমেন্ট করুন এবং যাচাই করুন`;
            
            // Open UPI app for payment
            if (selectedPaymentMethod === 'upi') {
                const upiUrl = `upi://pay?pa=bosak.mr@superyes&pn=BongShaj&am=${pendingPaymentOrder.totalAmount}&cu=INR&tn=Order-${pendingPaymentOrder.id}`;
                window.location.href = upiUrl;
            }
        }

        function verifyPayment() {
            const verification = document.getElementById('paymentVerification');
            const status = document.getElementById('paymentStatus');
            
            // Simulate payment verification (in real app, this would call backend)
            verification.className = 'payment-verification payment-pending';
            status.textContent = 'পেমেন্ট যাচাই করা হচ্ছে...';
            
            setTimeout(() => {
                // Simulate successful payment (90% success rate)
                const isPaymentSuccessful = Math.random() > 0.1;
                
                if (isPaymentSuccessful) {
                    verification.className = 'payment-verification payment-success';
                    status.textContent = '✅ পেমেন্ট সফল হয়েছে!';
                    setTimeout(() => {
                        confirmOrder();
                    }, 2000);
                } else {
                    verification.className = 'payment-verification payment-failed';
                    status.textContent = '❌ পেমেন্ট ব্যর্থ হয়েছে। আবার চেষ্টা করুন।';
                }
            }, 3000);
        }

        function confirmOrder() {
            if (pendingPaymentOrder) {
                pendingPaymentOrder.status = 'Confirmed';
                orders.unshift(pendingPaymentOrder);
                localStorage.setItem('orders', JSON.stringify(orders));
                
                // Clear cart
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // Show success page
                document.getElementById('orderIdDisplay').textContent = pendingPaymentOrder.id;
                showPage('orderSuccess');
                
                // Reset payment selection
                selectedPaymentMethod = null;
                pendingPaymentOrder = null;
            }
        }

        function goToOrders() {
            showPage('orders');
        }

        function loadOrders() {
            const ordersList = document.getElementById('ordersList');
            
            if (orders.length === 0) {
                ordersList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">📦</div>
                        <div class="empty-title">কোনো অর্ডার নেই</div>
                        <div class="empty-message">আপনি এখনো কোনো অর্ডার করেননি।</div>
                    </div>
                `;
                return;
            }
            
            ordersList.innerHTML = orders.map(order => `
                <div class="cart-item" style="margin: 20px; cursor: pointer;" onclick="showOrderDetails('${order.id}')">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; margin-bottom: 5px;">অর্ডার #${order.id}</div>
                        <div style="color: #666; margin-bottom: 5px;">তারিখ: ${order.date}</div>
                        <div style="color: var(--primary-color); font-weight: 600; margin-bottom: 5px;">৳${order.totalAmount}</div>
                        <div style="font-size: 0.9rem;">
                            ${order.items.map(item => `${item.name} (${item.quantity})`).join(', ')}
                        </div>
                        <div style="margin-top: 10px;">
                            <span style="background: var(--success-color); color: white; padding: 4px 8px; border-radius: 5px; font-size: 0.8rem;">
                                ${order.status}
                            </span>
                        </div>
                    </div>
                    <div style="color: #666;">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            `).join('');
        }

        function showOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const deliveryDate = new Date();
            deliveryDate.setDate(deliveryDate.getDate() + 7);
            
            const modalContent = document.getElementById('orderDetailsContent');
            modalContent.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4>অর্ডার #${order.id}</h4>
                    <p style="color: #666;">অর্ডারের তারিখ: ${order.date}</p>
                    <p style="color: #666;">ডেলিভারি তারিখ: ${deliveryDate.toLocaleDateString('bn-BD')}</p>
                </div>
                
                ${order.items.map(item => `
                    <div class="order-item-card">
                        <div class="order-item-header">
                            <div class="order-item-image">Image</div>
                            <div class="order-item-info">
                                <div class="order-item-name">${item.name}</div>
                                <div class="order-item-price">৳${item.price}</div>
                            </div>
                        </div>
                        <div class="order-item-details">
                            <div><strong>পরিমাণ:</strong> ${item.quantity}</div>
                            <div><strong>মোট:</strong> ৳${item.price * item.quantity}</div>
                            ${item.selectedSize ? `<div><strong>সাইজ:</strong> ${item.selectedSize}</div>` : ''}
                            ${item.selectedColor ? `<div><strong>রঙ:</strong> ${item.selectedColor}</div>` : ''}
                        </div>
                        <div class="order-status-badge status-${order.status.toLowerCase().replace(' ', '-')}">
                            ${order.status}
                        </div>
                    </div>
                `).join('')}
                
                <div style="border-top: 1px solid var(--border-color); padding-top: 15px; margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>পেমেন্ট পদ্ধতি:</span>
                        <span>${order.paymentMethod === 'cod' ? 'Cash on Delivery' : order.paymentMethod === 'upi' ? 'UPI Payment' : 'SuperMoney'}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-weight: 700; font-size: 1.1rem; color: var(--primary-color);">
                        <span>মোট:</span>
                        <span>৳${order.totalAmount}</span>
                    </div>
                </div>
            `;
            
            document.getElementById('orderDetailsModal').classList.remove('hidden');
        }

        function closeOrderDetails() {
            document.getElementById('orderDetailsModal').classList.add('hidden');
        }

        function showAddressPage() {
            loadSavedAddress();
            showPage('address');
        }

        function loadSavedAddress() {
            const savedAddressDiv = document.getElementById('savedAddress');
            const noAddressDiv = document.getElementById('noAddress');
            const addressDetails = document.getElementById('addressDetails');
            
            if (savedAddress) {
                addressDetails.innerHTML = `
                    <div><strong>নাম:</strong> ${savedAddress.name}</div>
                    <div><strong>মোবাইল:</strong> ${savedAddress.mobile}</div>
                    <div><strong>ঠিকানা:</strong> ${savedAddress.address}</div>
                `;
                savedAddressDiv.classList.remove('hidden');
                noAddressDiv.classList.add('hidden');
            } else {
                savedAddressDiv.classList.add('hidden');
                noAddressDiv.classList.remove('hidden');
            }
        }

        function showAddressForm() {
            document.getElementById('addressForm').classList.remove('hidden');
            document.getElementById('noAddress').classList.add('hidden');
        }

        function editAddress() {
            if (savedAddress) {
                document.getElementById('addressName').value = savedAddress.name;
                document.getElementById('addressMobile').value = savedAddress.mobile;
                document.getElementById('addressText').value = savedAddress.address;
            }
            showAddressForm();
        }

        function saveAddress(event) {
            event.preventDefault();
            
            const name = document.getElementById('addressName').value;
            const mobile = document.getElementById('addressMobile').value;
            const address = document.getElementById('addressText').value;
            
            savedAddress = { name, mobile, address };
            localStorage.setItem('savedAddress', JSON.stringify(savedAddress));
            
            document.getElementById('addressForm').classList.add('hidden');
            loadSavedAddress();
            
            alert('ঠিকানা সফলভাবে সেভ হয়েছে!');
        }

        function showWishlist() {
            alert('গছন্দের তালিকা শীঘ্রই আসছে!');
        }

        function showPage(page) {
            // Hide all pages
            const pages = ['homePage', 'productsPage', 'cartPage', 'checkoutPage', 'orderSuccessPage', 'ordersPage', 'accountPage', 'addressPage'];
            pages.forEach(pageId => {
                const element = document.getElementById(pageId);
                if (element) element.classList.add('hidden');
            });
            
            // Show selected page
            const targetPage = page + 'Page';
            const element = document.getElementById(targetPage);
            if (element) element.classList.remove('hidden');
            
            // Update navigation
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            const activeNav = document.querySelector(`[onclick="showPage('${page}')"]`);
            if (activeNav) activeNav.classList.add('active');
            
            // Load page-specific content
            switch(page) {
                case 'home':
                    loadProducts();
                    break;
                case 'products':
                    loadProducts();
                    break;
                case 'cart':
                    updateCartDisplay();
                    break;
                case 'orders':
                    loadOrders();
                    break;
                case 'address':
                    loadSavedAddress();
                    break;
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            console.log('BongShaj app initialized');
            
            // Close modal when clicking outside
            document.getElementById('productModal').addEventListener('click', (e) => {
                if (e.target.id === 'productModal') {
                    closeProductModal();
                }
            });
        });
    </script>
</body>
</html>
